--- a/driver/wrapndis.c
+++ b/driver/wrapndis.c
@@ -704,7 +704,9 @@
 			n = wnd->max_tx_packets;
 		n = mp_tx_packets(wnd, wnd->tx_ring_start, n);
 		if (n) {
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2, 6, 31)
 			wnd->net_dev->trans_start = jiffies;
+#endif 
 			wnd->tx_ring_start =
 				(wnd->tx_ring_start + n) % TX_RING_SIZE;
 			wnd->is_tx_ring_full = 0;

